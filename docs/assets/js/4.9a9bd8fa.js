(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1043:function(t,s,a){"use strict";a.r(s);var n=a(112),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),n("blockquote",[n("p",[t._v("正如人的生老病死一样，组件从创建到销毁也要经历一些特殊的阶段。官方给我们提供了一些方法，让我们可以在组件的这些阶段中添加自己的代码。")])]),t._v(" "),n("h2",{attrs:{id:"一、生命周期示意图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、生命周期示意图"}},[t._v("#")]),t._v(" 一、生命周期示意图")]),t._v(" "),n("p",[t._v("react "),n("code",[t._v("v15")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(983),alt:"react16之前"}})]),t._v(" "),n("p",[t._v("react "),n("code",[t._v("v16.3")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(984),alt:"react16之前"}})]),t._v(" "),n("p",[t._v("react "),n("code",[t._v("v16.4")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(985),alt:"react16之前"}})]),t._v(" "),n("p",[t._v("参考:"),n("a",{attrs:{href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React lifecycle methods diagram"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"二、详解生命周期-以react15版本为例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、详解生命周期-以react15版本为例"}},[t._v("#")]),t._v(" 二、详解生命周期(以"),n("code",[t._v("react15")]),t._v("版本为例)")]),t._v(" "),n("p",[t._v("一、初始化阶段")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("getDefaultProps")])]),t._v(" "),n("p",[t._v("在组件挂载之前调用，且只会调用一次，在组件中赋值的数据会被设置到this.props中")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("getIntitialState")])]),t._v(" "),n("p",[t._v("在组件挂载之前使用，且只会调用一次，函数的返回值会被设置到this.state中")])])]),t._v(" "),n("p",[t._v("二、挂载阶段")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("componentWillMount")])]),t._v(" "),n("p",[t._v("组件被挂载在"),n("code",[t._v("dom")]),t._v("中使用，只会调用一次。，在render方法之前。这里使用"),n("code",[t._v("this.setState")]),t._v("不会引起组件的重新渲染。可以在这里进行普通变量的初始化赋值。")])]),t._v(" "),n("li",[n("p",[t._v("render")]),t._v(" "),n("p",[t._v("render不负责组件的渲染，它只会返回一个ui给react,让react去渲染\nPS:注意这里，触发render函数只是构建了ui，至于如何去渲染,有react决定")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("componentDidMount")])]),t._v(" "),n("p",[t._v("组件挂载在"),n("code",[t._v("dom")]),t._v("后使用，只会调用一次。可以获取"),n("code",[t._v("dom")]),t._v("操作。这里使用"),n("code",[t._v("this.state")]),t._v("会引用重新渲染。"),n("code",[t._v("http")]),t._v("请求可以放在这里。")])])]),t._v(" "),n("p",[t._v("三、更新阶段")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("componentWillReceiveProps:function(nextProps)")])]),t._v(" "),n("p",[t._v("传入props时引起的组件更新,"),n("code",[t._v("nextProps")]),t._v("指的是传入的props。如果我们要在这里要根据prop更新state,记得先将"),n("code",[t._v("nextProps")]),t._v("与"),n("code",[t._v("this.props")]),t._v("比较，确认二者不同再更新。\nPS: 如果涉及到在子组件中使用nextProps接收父组件传递的值更新状态，又在子组件中给父组件传递更新状态时，一定要进行if比较操作，否则可能会不断render组件，直至浏览器内存耗尽，陷入死循环。")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    基础数据类型比较")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("statState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    引用数据类型比较")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("nextProps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[n("p",[n("code",[t._v("shouldComponentUpdate")])]),t._v(" "),n("p",[t._v("在组件重新渲染之前调用，可以返回一个true或者false来决定组件是否要刷新。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("componentWillUpdate")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("componnentDidUpdate")])]),t._v(" "),n("p",[t._v("组件重新渲染之后调用")])])]),t._v(" "),n("p",[t._v("四、卸载阶段")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("componentWillUnmount")])]),t._v(" "),n("p",[t._v("组件卸载和销毁之前调用，在这里我们可以清理数据、状态和事件。比如某些操作会产生浏览器缓存，我们可以在这里将浏览器缓存清理掉。")])])])])}),[],!1,null,null,null);s.default=e.exports},983:function(t,s,a){t.exports=a.p+"assets/img/v15.62e0f5ea.png"},984:function(t,s,a){t.exports=a.p+"assets/img/v16_3.6159b68c.png"},985:function(t,s,a){t.exports=a.p+"assets/img/v16_4.d9180284.png"}}]);